# 📊 지역 불균형 대시보드 섹션별 상세 구성 (전체 데이터 사용)

## ✅ 구성 원칙

-   모든 시각화는 **Highcharts** 기반으로 구성됩니다.
-   `data_fields_desc.md`에 정의된 **모든 데이터 항목을 누락 없이 활용**합니다.
-   세종특별자치시는 초기 null 데이터 포함 가능성이 있으며 이는 자연스러운 현상입니다.
-   기본 데이터 범위는 2000년~2024년입니다. 단, 공공의료 관련 데이터는 2015년~2023년입니다.
-   로고 및 파비콘은 [로고 이미지](../logo.png)를 사용합니다.
-   **모든 차트 툴팁은 다음 형식을 따릅니다:**

    ```
    **항목명**
    수치
    비율(전체 대비)
    ```

-   페이지 전반은 **동글동글한 UI 분위기**, **각 섹션은 테두리 선으로 영역을 구분**합니다.
-   지역 정렬 순서는 다음과 같습니다:

    ```
    전국
    경기도
    서울특별시
    부산광역시
    대구광역시
    인천광역시
    광주광역시
    대전광역시
    울산광역시
    세종특별자치시
    강원특별자치도
    충청북도
    충청남도
    전북특별자치도
    전라남도
    경상북도
    경상남도
    제주특별자치도
    ```

-   **전국** 데이터는 비율 계산에는 사용하지만, 차트에는 표시하지 않습니다.
-   모든 차트는 **가시성 확보를 위해 충분한 높이와 여백**을 갖습니다.

---

## 🔹 섹션 0: 지역 불균형 종합 지표 지도 (최상단)

-   **차트 유형**: Choropleth Map
-   **표시 단위**: 시도 (17개 광역지자체)
-   **표시 데이터**: 종합 점수 `RDCI` (0\~100)

---

### 📌 설명

-   인구, 교육, 의료, 경제, 인구 이동 등 5개 분야의 핵심 지표를 기반으로 계산된 **지역 불균형 종합 지표**
-   지표는 정규화 후 가중 평균하여 점수화되며, 높을수록 자원이 풍부하고 격차가 적은 지역
-   **색상**으로 불균형 정도를 한눈에 표현

---

### 🧮 종합 지표 계산 방식

#### ✅ 사용 지표 및 가중치

| 분야 | 지표                         | 설명                                 | 가중치 |
| ---- | ---------------------------- | ------------------------------------ | ------ |
| 인구 | `total_population`           | 해당 지역 총인구                     | 0.20   |
| 교육 | `students_total` / `schools` | 학생 수 대비 학교 수 (고등학교+대학) | 0.25   |
| 의료 | `total_beds` / `total_count` | 의료기관당 병상 수                   | 0.25   |
| 경제 | `employment_rate_15_64`      | 15\~64세 고용률                      | 0.20   |
| 이동 | `abs(net_moved)`             | 순이동자수 절대값 (이동 불균형)      | 0.10   |

#### ✅ 정규화 로직 (Min-Max Scaling)

```python
def normalize(series):
    return (series - series.min()) / (series.max() - series.min())
```

#### ✅ 예시: 종합 점수 계산

```python
df['norm_population'] = normalize(df['total_population'])
df['norm_education'] = normalize(df['students_total'] / df['schools'])
df['norm_healthcare'] = normalize(df['total_beds'] / df['total_count'])
df['norm_employment'] = normalize(df['employment_rate_15_64'])
df['norm_mobility'] = normalize(df['net_moved'].abs())

df['RDCI'] = (
    df['norm_population']   * 0.20 +
    df['norm_education']    * 0.25 +
    df['norm_healthcare']   * 0.25 +
    df['norm_employment']   * 0.20 +
    df['norm_mobility']     * 0.10
) * 100
```

---

### 🛠 툴팁 정보

툴팁은 다음과 같은 형식을 따릅니다:

```
**항목명**
수치
비율(전체 대비)
```

표시되는 항목:

-   종합 점수 (RDCI)
-   총인구: `total_population`
-   고용률(15–64세): `employment_rate_15_64`
-   학생 수: `students_total`
-   공공 병상 수: `total_beds`
-   순이동자수: `net_moved`

---

### ⚙️ 차트 옵션

-   **연도 선택**: 가능 (기본값: 2024)
-   **차트 제목**: `{연도}년 시도별 지역 불균형 종합 지표 지도`
-   **범례**: 색상 구간 예시

    -   0\~50: 붉은색 계열 (격차 심함)
    -   50\~70: 주황
    -   70\~90: 연두
    -   90\~100: 녹색 계열 (우수 지역)

---

### 🧹 데이터 전처리 조건

-   모든 주요 지표는 `시도별, 연도별`로 정규화
-   필수값 결측치(`null`) 발생 시 자동 제외
-   `net_moved`는 절대값으로 변환하여 **이동 불균형** 크기를 반영
-   `전국`은 비율 계산에만 사용되며 지도에서는 제외됨

---

## 🔹 섹션 5: 시도 간 인구 이동 흐름

-   **차트 유형**: Sankey Diagram
-   **표시 데이터**: `from`, `to`, `moved`
-   **설명**: 시도 간 인구 이동 흐름을 시각적으로 표현
-   **범례/상호작용**:

    -   연도 선택
    -   Hover 시 다음 형식의 툴팁 제공:

        ```
        **{출발지 → 도착지}**
        이동자 수
        비율(전체 대비)
        ```

    -   차트 제목: `{연도}년 시도 간 인구 이동 흐름`

-   **데이터 처리 주의사항**:

    -   `전국` → 시도 또는 시도 → `전국` 은 제외
    -   `moved` 값 기준, 흐름 크기 시각화

---

## 🔹 섹션 6: 성별 인구 및 경제활동 분포

-   **차트 유형**: Donut Chart (중앙 값 포함 파이 차트)
-   **표시 데이터**:

    -   인구: `male_population`, `female_population`
    -   경제활동: `economically_active`, `economically_inactive`

-   **설명**:

    -   좌: 성별 인구 파이 차트 (중앙에 `total_population` 표시)
    -   우: 경제활동 인구 파이 차트 (중앙에 `labor_force_participation_rate` 표시)

-   **범례/상호작용**:

    -   지역 및 연도 선택 가능
    -   차트 제목: `{연도}년 {지역} 성별 인구 및 경제활동 구조`

---

## 📝 기타 주의 사항

-   모든 섹션은 연도 및 지역 선택 시 null 값은 자동 필터링 처리
-   모든 지표는 단위 표기를 명확히 하고, 화면에는 한글 항목명이 표시되며, 내부 데이터 키(`key`)는 영문으로 유지됩니다.
-   화면에 표시될 한글 항목명은 [지표 한글 매핑표](region-insight_label_map.md)를 참조하여 자동 매핑됩니다.
-   전국은 화면 표시에서는 제외되며, 비율 계산에는 포함됩니다.
-   모든 차트는 가시성을 우선하여 개별적인 높이와 충분한 여백을 가집니다.
-   각 섹션은 둥근 스타일의 테두리 박스로 구분되며 일관된 시각 레이아웃을 유지합니다.
